{"version":3,"sources":["app.component.ts"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;YA2CA;gBAGC,sBAAoB,KAAW;oBAAX,UAAK,GAAL,KAAK,CAAM;oBAF/B,gBAAW,GAAG,QAAQ,CAAC;gBAIvB,CAAC;gBAED,uCAAgB,GAAhB;oBAAA,iBASC;oBARA,IAAI,CAAC,KAAK,CAAC,GAAG,CAAC,kBAAkB,CAAC;yBAChC,SAAS,CAAC,UAAC,GAAQ;wBACnB,IAAI,UAAU,GAAG,GAAG,CAAC,KAAK,CAAC;wBAC3B,EAAE,CAAC,CAAC,UAAU,CAAC,CAAC,CAAC;4BAChB,OAAO,CAAC,GAAG,CAAC,YAAY,CAAC,CAAC;4BAC1B,KAAI,CAAC,WAAW,GAAG,SAAS,CAAC;wBAC9B,CAAC;oBACF,CAAC,CAAC,CAAA;gBACJ,CAAC;gBAED,oCAAa,GAAb;oBAAA,iBAWC;oBAVA,sCAAsC;oBACtC,IAAI,WAAW,GAAG,MAAM,CAAC,IAAI,CAAC,mCAAmC,EACxD,cAAc,EACd,0CAA0C,CAAC,CAAC;oBACrD,IAAI,aAAa,GAAG,MAAM,CAAC,WAAW,CAAC;wBACtC,EAAE,CAAC,CAAC,WAAW,CAAC,MAAM,CAAC,CAAC,CAAC;4BACxB,MAAM,CAAC,aAAa,CAAC,aAAa,CAAC,CAAC;4BACpC,KAAI,CAAC,gBAAgB,EAAE,CAAC;wBACzB,CAAC;oBACF,CAAC,EAAE,IAAI,CAAC,CAAC;gBACV,CAAC;gBAjEF;oBAAC,gBAAS,CAAC;wBACV,QAAQ,EAAE,QAAQ;wBAClB,SAAS,EAAE,CAAC,gBAAgB,CAAC;wBAC7B,QAAQ,EAAE,qcAYT;wBACD,UAAU,EAAE,CAAC,wCAAa,EAAE,qCAAiB,CAAC;wBAC9C,SAAS,EAAE,CAAC,oCAAgB,EAAE,qBAAc,CAAC;qBAC7C,CAAC;oBACD,+BAAW,CAAC;wBACZ;4BACC,IAAI,EAAE,GAAG;4BACT,IAAI,EAAE,eAAe;4BACrB,SAAS,EAAE,wCAAa;yBACxB;wBACD;4BACC,IAAI,EAAE,WAAW;4BACjB,IAAI,EAAE,SAAS;4BACf,SAAS,EAAE,4BAAO;yBAClB;wBACD;4BACC,IAAI,EAAE,aAAa;4BACnB,IAAI,EAAE,WAAW;4BACjB,SAAS,EAAE,gCAAS;yBACpB;qBACD,CAAC;;gCAAA;gBA+BF,mBAAC;YAAD,CA9BA,AA8BC,IAAA;YA9BD,uCA8BC,CAAA","file":"app.component.js","sourcesContent":["import {Component} from \"@angular/core\";\r\nimport {RouteConfig, ROUTER_DIRECTIVES, ROUTER_PROVIDERS} from '@angular/router-deprecated';\r\nimport {Http, HTTP_PROVIDERS} from '@angular/http';\r\nimport {PollContainer} from \"./poll-container.component\";\r\nimport {NewPoll} from \"./new-poll.component\";\r\nimport {AfterAuth} from \"./after-auth.component\";\r\n\r\n@Component({\r\n\tselector: 'my-app',\r\n\tstyleUrls: ['../css/app.css'],\r\n\ttemplate: `\r\n\t\t<div id=\"wrapper\">\r\n\t\t\t<div id=\"header\">\r\n\t\t\t\t<h1>FCC Voting App</h1>\r\n\t\t\t\t<div id=\"menu\">\r\n\t\t\t\t\t<a [routerLink]=\"['PollContainer']\"><div class=\"button\">Home</div></a>\r\n\t\t\t\t\t<a [routerLink]=\"['NewPoll']\"><div class=\"button\">New Poll</div></a>\r\n\t\t\t\t\t<div class=\"button\" (click)=\"handleLogging()\">{{loginButton}}</div>\r\n\t\t\t\t</div>\r\n\t\t\t</div>\r\n\t\t\t<router-outlet></router-outlet>\r\n\t\t</div>\r\n\t`,\r\n\tdirectives: [PollContainer, ROUTER_DIRECTIVES],\r\n\tproviders: [ROUTER_PROVIDERS, HTTP_PROVIDERS]\r\n})\r\n@RouteConfig([\r\n\t{\r\n\t\tpath: '/',\r\n\t\tname: 'PollContainer',\r\n\t\tcomponent: PollContainer\r\n\t},\r\n\t{\r\n\t\tpath: '/new-poll',\r\n\t\tname: 'NewPoll',\r\n\t\tcomponent: NewPoll\r\n\t},\r\n\t{\r\n\t\tpath: '/after-auth',\r\n\t\tname: 'AfterAuth',\r\n\t\tcomponent: AfterAuth\r\n\t}\r\n])\r\nexport class AppComponent {\r\n\tloginButton = 'Log In';\r\n\r\n\tconstructor(private _http: Http) {\r\n\r\n\t}\r\n\r\n\tcheckLoggedState() {\r\n\t\tthis._http.get('/auth/checkCreds')\r\n\t\t\t.subscribe((res: any) => {\r\n\t\t\t\tlet isLoggedIn = res._body;\r\n\t\t\t\tif (isLoggedIn) {\r\n\t\t\t\t\tconsole.log('logged in!');\r\n\t\t\t\t\tthis.loginButton = 'Log Out';\r\n\t\t\t\t}\r\n\t\t\t})\r\n\t}\r\n\r\n\thandleLogging() {\r\n\t\t//TODO refactor oath code into service\r\n\t\tlet oauthWindow = window.open('http://localhost:3000/auth/github',\r\n\t\t\t\t\t\t\t\t\t  'OAuthConnect',\r\n\t\t\t\t\t\t\t\t\t  'location=0,status=0,width=800,height=400');\r\n\t\tlet oauthInterval = window.setInterval(() => {\r\n\t\t\tif (oauthWindow.closed) {\r\n\t\t\t\twindow.clearInterval(oauthInterval);\r\n\t\t\t\tthis.checkLoggedState();\r\n\t\t\t}\r\n\t\t}, 1000);\r\n\t}\r\n}"]}