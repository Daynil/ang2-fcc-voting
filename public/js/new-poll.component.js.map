{"version":3,"sources":["new-poll.component.ts"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;YAoBA;gBAGI,iBAAoB,YAA0B,EAC1B,WAAwB;oBADxB,iBAAY,GAAZ,YAAY,CAAc;oBAC1B,gBAAW,GAAX,WAAW,CAAa;gBAAI,CAAC;gBAEjD,0BAAQ,GAAR;oBAAA,iBAIC;oBAHG,IAAI,CAAC,WAAW,CAAC,gBAAgB,EAAE,CAAC,IAAI,CAAC,UAAA,GAAG;wBACxC,KAAI,CAAC,IAAI,GAAG,GAAG,CAAC,IAAI,CAAC;oBACzB,CAAC,CAAC,CAAC;gBACP,CAAC;gBAED,4BAAU,GAAV,UAAW,QAAgB,EAAE,OAAe;oBACxC,EAAE,CAAC,CAAC,QAAQ,KAAK,EAAE,IAAI,OAAO,KAAK,EAAE,CAAC;wBAAC,MAAM,CAAC;oBAC9C,IAAI,OAAO,GAAS,EAAE,CAAC;oBACvB,OAAO,CAAC,OAAO,GAAG,IAAI,CAAC,IAAI,CAAC,QAAQ,CAAC;oBACrC,OAAO,CAAC,QAAQ,GAAG,QAAQ,CAAC;oBAC5B,OAAO,CAAC,OAAO,GAAG,EAAE,CAAC;oBACrB,OAAO,CAAC,KAAK,CAAC,GAAG,CAAC,CAAC,OAAO,CAAC,UAAA,MAAM;wBAC7B,IAAI,SAAS,GAAG;4BACZ,IAAI,EAAE,MAAM,CAAC,IAAI,EAAE;4BACnB,KAAK,EAAE,CAAC;yBACX,CAAC;wBACF,OAAO,CAAC,OAAO,CAAC,IAAI,CAAC,SAAS,CAAC,CAAC;oBACpC,CAAC,CAAC,CAAC;oBACH,IAAI,CAAC,YAAY,CAAC,UAAU,CAAC,OAAO,CAAC,CAAC,IAAI,CAAC,UAAA,GAAG,IAAI,OAAA,OAAO,CAAC,GAAG,CAAC,GAAG,CAAC,EAAhB,CAAgB,CAAC,CAAC;gBACxE,CAAC;gBAxCL;oBAAC,gBAAS,CAAC;wBACP,QAAQ,EAAE,UAAU;wBACpB,SAAS,EAAE,CAAC,gBAAgB,CAAC;wBAC7B,QAAQ,EAAE,saAST;qBACJ,CAAC;;2BAAA;gBA4BF,cAAC;YAAD,CA3BA,AA2BC,IAAA;YA3BD,6BA2BC,CAAA","file":"new-poll.component.js","sourcesContent":["import {Component, OnInit} from \"@angular/core\";\r\nimport {PollsService} from \"./polls.service\";\r\nimport {AuthService} from \"./auth.service\";\r\nimport {Poll} from \"./Poll\";\r\nimport {User} from \"./User\";\r\n\r\n@Component({\r\n    selector: 'new-poll',\r\n    styleUrls: ['../css/app.css'],\r\n    template: `\r\n        <div id=\"new-poll\">\r\n            <h1>Create a new poll!</h1>\r\n            <p>Question: </p>\r\n            <input type=\"text\" id=\"new-question\" #newquestion>\r\n            <p>Choices (comma separated): </p>\r\n            <input type=\"text\" id=\"new-choices\" #newchoices><br/>\r\n            <div class=\"button\" (click)=\"createPoll(newquestion.value, newchoices.value)\">Create</div>\r\n        </div>\r\n    `\r\n})\r\nexport class NewPoll implements OnInit {\r\n    user: User;\r\n    \r\n    constructor(private pollsService: PollsService,\r\n                private authService: AuthService) { }\r\n                \r\n    ngOnInit() {\r\n        this.authService.checkLoggedState().then(res => {\r\n            this.user = res.user;\r\n        });\r\n    }\r\n    \r\n    createPoll(question: string, choices: string) {\r\n        if (question === '' || choices === '') return;\r\n        let newPoll: Poll = {};\r\n        newPoll.creator = this.user.githubID;\r\n        newPoll.question = question;\r\n        newPoll.choices = [];\r\n        choices.split(',').forEach(choice => {\r\n            let choiceObj = {\r\n                text: choice.trim(),\r\n                votes: 0\r\n            };\r\n            newPoll.choices.push(choiceObj);\r\n        });\r\n        this.pollsService.createPoll(newPoll).then(res => console.log(res));\r\n    }\r\n}"]}