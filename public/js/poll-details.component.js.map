{"version":3,"sources":["poll-details.component.ts"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;YAuBA;gBAMI,qBAAoB,YAA0B,EAC1B,YAA0B;oBAD1B,iBAAY,GAAZ,YAAY,CAAc;oBAC1B,iBAAY,GAAZ,YAAY,CAAc;oBALpC,YAAO,GAAG,IAAI,mBAAY,EAAW,CAAC;gBAKE,CAAC;gBAEnD,qCAAe,GAAf;oBACI,IAAI,CAAC,aAAa,CAAC,IAAI,CAAC,YAAY,CAAC,aAAa,CAAC,CAAC;gBACxD,CAAC;gBAED,iCAAW,GAAX,UAAY,OAAO;oBACf,EAAE,CAAC,CAAC,IAAI,CAAC,YAAY,CAAC;wBAAC,IAAI,CAAC,YAAY,CAAC,SAAS,CAAC,IAAI,CAAC,YAAY,CAAC,aAAa,EAAE,IAAI,CAAC,IAAI,CAAC,OAAO,CAAC,CAAC;gBAC3G,CAAC;gBAED,mCAAa,GAAb,UAAc,EAAqB;oBAC/B,IAAI,CAAC,YAAY,CAAC,WAAW,CAAC,EAAE,EAAE,IAAI,CAAC,IAAI,CAAC,OAAO,CAAC,CAAC;gBACzD,CAAC;gBAED,gCAAU,GAAV,UAAW,YAAY;oBAAvB,iBAMC;oBALG,IAAI,CAAC,YAAY,CAAC,UAAU,CAAC,IAAI,CAAC,IAAI,EAAE,YAAY,CAAC,KAAK,CAAC;yBACtD,IAAI,CAAC,UAAA,GAAG;wBACL,KAAI,CAAC,IAAI,GAAG,GAAG,CAAC,IAAI,CAAC;wBACrB,OAAO,CAAC,GAAG,CAAC,KAAI,CAAC,IAAI,CAAC,CAAC;oBAC3B,CAAC,CAAC,CAAC;gBACX,CAAC;gBA1BD;oBAAC,YAAK,EAAE;;yDAAA;gBACR;oBAAC,aAAM,EAAE;;4DAAA;gBAET;oBAAC,gBAAS,CAAC,cAAc,CAAC;;iEAAA;gBArB9B;oBAAC,gBAAS,CAAC;wBACP,QAAQ,EAAE,cAAc;wBACxB,SAAS,EAAE,CAAC,gBAAgB,CAAC;wBAC7B,QAAQ,EAAE,ojBAWT;wBACD,SAAS,EAAE,CAAC,4BAAY,CAAC;qBAC5B,CAAC;;+BAAA;gBA8BF,kBAAC;YAAD,CA7BA,AA6BC,IAAA;YA7BD,qCA6BC,CAAA","file":"poll-details.component.js","sourcesContent":["import {Component, Input, Output, EventEmitter,\r\n        ViewChild, AfterViewInit, ElementRef, OnChanges} from \"@angular/core\";\r\nimport {Poll} from \"./Poll\";\r\nimport {ChartService} from \"./chart.service\";\r\nimport {PollsService} from \"./polls.service\";\r\n\r\n@Component({\r\n    selector: 'poll-details',\r\n    styleUrls: ['../css/app.css'],\r\n    template: `\r\n        <div class=\"poll-details\">\r\n            <div id=\"details-question\">{{ poll.question }}</div>\r\n            <select name=\"pollChoices\" #choiceSelect>\r\n                <option *ngFor=\"let choice of poll.choices\" [value]=\"choice.text\">{{ choice.text }}</option>\r\n            </select>\r\n            <div class=\"button\" id=\"vote-button\" (click)=\"submitVote(choiceSelect)\">Vote</div>\r\n            <div height=\"300\" width=\"300\">\r\n                <canvas #choicesChart id=\"choices-chart\"></canvas>\r\n            </div>\r\n        </div>\r\n    `,\r\n    providers: [ChartService]\r\n})\r\nexport class PollDetails implements AfterViewInit, OnChanges {\r\n    @Input() poll: Poll;\r\n    @Output() onVoted = new EventEmitter<boolean>();\r\n    \r\n    @ViewChild('choicesChart') choicesChart: ElementRef;\r\n    \r\n    constructor(private chartService: ChartService,\r\n                private pollsService: PollsService) { }\r\n    \r\n    ngAfterViewInit() {\r\n        this.generateChart(this.choicesChart.nativeElement);\r\n    }\r\n    \r\n    ngOnChanges(changes) {\r\n        if (this.choicesChart) this.chartService.nextChart(this.choicesChart.nativeElement, this.poll.choices);\r\n    }\r\n        \r\n    generateChart(el: HTMLCanvasElement) {\r\n        this.chartService.createChart(el, this.poll.choices);\r\n    }\r\n    \r\n    submitVote(choiceSelect) {\r\n        this.pollsService.submitVote(this.poll, choiceSelect.value)\r\n            .then(res => {\r\n                this.poll = res.poll;\r\n                console.log(this.poll);\r\n            });\r\n    }\r\n\r\n}"]}